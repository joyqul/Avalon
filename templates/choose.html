{% extends "inner_static.html" %}
{% block body %}
<div class="room">
    <p> This is room {{ roomId }} </p>
    <p> Please choose {{ chooseNumber }} people </p>
    <script type="text/javascript">
    function calculateChecked() {
        var form = document.forms["choose"];
        var num = 0;
        for (var i = 0; i < form.length; i++) {
            var e = form[i];
            if (e.checked && e.type=="checkbox") num++;
        }
        return num;
    }

    function checkNum() {
        var num = calculateChecked();
        if (num > {{ chooseNumber }}) {
            alert("you choose too many");
            return false;
        }
        return true;
    }
    function checkClick() {
        var num = calculateChecked();
        if (num != {{ chooseNumber }}) {
            alert("you have to choose {{ chooseNumber}}");
            return false;
        }
        return true;
    }
    </script>

    <form name="choose" action="" method=post class="center">

    {% for i in range(room["count"]) %}
        {% if room["players"][i] == session['userId'] %}
            <p class="me"> 
        {% else %}
            <p>
        {% endif %}
        {% if room["players"][room["arthur"]] == room["players"][i] %}
            <img src="../../static/img/arthur.svg" height="30" width="30">
        {%  else %}
            <img src="../../static/img/arthur.svg" height="30" width="30" class="hide">
        {% endif %}
        <input type="checkbox" name="proposal_{{i}}" value="{{room["players"][i]}}" onclick="return checkNum()">
        {{ room["players"][i] }}, {{ room["showRole"][room["players"].index(session['userId'])][i] }} </p>
    {% endfor %}
        <input name="bt" type=submit value="CHOOSE" onclick="return checkClick()">
    </form>

</div>
{% endblock %}
